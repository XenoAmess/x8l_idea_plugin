plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '0.4.16'

    id 'application'
    id 'maven'
}

group 'com.xenoamess'
version '0.0.13-SNAPSHOT'

sourceSets {
    main {
        java {
            srcDirs 'src/main/gen'
        }
    }
    mainClassName = ""
}

intellij {
//    plugins 'java'
//    plugins 'xml'
//    plugins 'json'
//    setPlugins("org.jetbrains.kotlin:1.3.11-release-IJ2018.3-1")
}

repositories {
    mavenCentral()
    maven {
        url "https://oss.sonatype.org/content/repositories/snapshots/"
    }
    maven {
        url 'https://dl.bintray.com/jetbrains/intellij-plugin-service'
    }
}

dependencies {
    compile group: 'com.xenoamess', name: 'x8l', version: '2.1.0'
    compile group: 'org.apache.commons', name: 'commons-lang3', version: '3.9'
    testCompile group: 'junit', name: 'junit', version: '4.12'
}

// See https://github.com/JetBrains/gradle-intellij-plugin/
// See https://www.jetbrains.org/intellij/sdk/docs/reference_guide/intellij_artifacts.html
// See https://www.jetbrains.com/intellij-repository/releases/
// See https://www.jetbrains.com/intellij-repository/snapshots/
intellij {
//    version "IC-172.2103.15"
    version "IU-201.6073.9-EAP-SNAPSHOT"
}
patchPluginXml {
    sinceBuild "172.2103.15"
    changeNotes ""
}

apply plugin: 'org.jetbrains.intellij'
//apply plugin: 'maven'
//apply plugin: 'maven-publish'
//apply plugin: 'signing'
//
//task sourcesJar(type: Jar) {
//    classifier "sources"
//    from sourceSets.main.allJava
//}
//
//task javadocJar(type: Jar, dependsOn: javadoc) {
//    classifier "javadoc"
//    from javadoc.destinationDir
//}
//
//artifacts {
//    archives jar
//    archives sourcesJar
//    archives javadocJar
//}
//
//artifacts {
//    archives javadocJar, sourcesJar
//}
//
////publishing {
////    publications {
////        mavenJava(MavenPublication) {
////            customizePom(pom)
////            groupId 'com.github.mautini'
////            artifactId 'schemaorg-java'
////            version '1.0.1'
////
////            from components.java
////
////            artifact(sourcesJar) {
////                classifier = 'sources'
////            }
////            artifact(javadocJar) {
////                classifier = 'javadoc'
////            }
////        }
////    }
////    repositories {
////        maven {
////            url "https://oss.sonatype.org/service/local/staging/deploy/maven2"
////            credentials {
////                username sonatypeUsername
////                password sonatypePassword
////            }
////        }
////    }
////}
//
//uploadArchives {
//    repositories {
//        mavenDeployer {
//            beforeDeployment { MavenDeployment deployment -> signing.signPom(deployment) }
//            beforeDeployment { MavenDeployment deployment -> signing.sigm(deployment) }
////            beforeDeployment { MavenDeployment deployment -> signing.sign(deployment) }
//
//            repository(url: "https://oss.sonatype.org/service/local/staging/deploy/maven2/") {
//                authentication(userName: ossrhUsername, password: ossrhPassword)
//            }
//
//            snapshotRepository(url: "https://oss.sonatype.org/content/repositories/snapshots/") {
//                authentication(userName: ossrhUsername, password: ossrhPassword)
//            }
//
//            pom {
//                project {
//                    name '${project.artifactId}'
//                    packaging 'jar'
//                    // optionally artifactId can be defined here
//                    description '''
//<p><b>Plugin to deal with X8l data format for idea.</b></p>
//<br/>
//<p>
//  <b>
//      X8l format is a type of data format, it is designed to be replace of xml/json in most cases when you need the data be shorter(while remains readability).
//  </b>
//</p>
//<br/>
//<p>
//  <b>
//      See <a href="https://plugins.jetbrains.com/plugin/13915-x8l">plugin on Jetbrains plugin storage</a><br/>
//      See <a href="https://github.com/XenoAmess/x8l_idea_plugin">plugin on github</a><br/>
//      See <a href="https://github.com/cyanpotion/x8l">X8l Grammar/SDK</a><br/>
//  </b>
//</p>
//<br/>
//<p><img src="https://raw.githubusercontent.com/XenoAmess/x8l_idea_plugin/master/pictures/screenshot.png" width="1080" height="720" alt="screenshot.png"/></p>
//<br/>
//<p><a href="https://github.com/XenoAmess/x8l_idea_plugin/issues">Send Feedback</a></p>
//                '''
//                    url 'https://github.com/XenoAmess/x8l_idea_plugin'
//                    scm {
//                        connection 'scm:git:${project.url}.git'
//                        developerConnection '${project.scm.connection}'
//                        url '${project.url}'
//                    }
//
//                    licenses {
//                        license {
//                            name 'MIT'
//                            url '${project.url}/blob/master/LICENSE</url>'
//                        }
//                    }
//
//                    developers {
//                        developer {
//                            name 'Jin Xu'
//                            id 'XenoAmess'
//                            email 'xenoamess@gmail.com'
//                            organization 'XenoAmess'
//                            url 'https://github.com/xenoamess'
//                        }
//                    }
//                }.writeTo("$buildDir/pom.xml")
//            }
//        }
//    }
//}
//
//task writeNewPom() {
//    pom {
//        project {
//            name '${project.artifactId}'
//            packaging 'jar'
//            // optionally artifactId can be defined here
//            description '''
//<p><b>Plugin to deal with X8l data format for idea.</b></p>
//<br/>
//<p>
//  <b>
//      X8l format is a type of data format, it is designed to be replace of xml/json in most cases when you need the data be shorter(while remains readability).
//  </b>
//</p>
//<br/>
//<p>
//  <b>
//      See <a href="https://plugins.jetbrains.com/plugin/13915-x8l">plugin on Jetbrains plugin storage</a><br/>
//      See <a href="https://github.com/XenoAmess/x8l_idea_plugin">plugin on github</a><br/>
//      See <a href="https://github.com/cyanpotion/x8l">X8l Grammar/SDK</a><br/>
//  </b>
//</p>
//<br/>
//<p><img src="https://raw.githubusercontent.com/XenoAmess/x8l_idea_plugin/master/pictures/screenshot.png" width="1080" height="720" alt="screenshot.png"/></p>
//<br/>
//<p><a href="https://github.com/XenoAmess/x8l_idea_plugin/issues">Send Feedback</a></p>
//                '''
//            url 'https://github.com/XenoAmess/x8l_idea_plugin'
//            scm {
//                connection 'scm:git:${project.url}.git'
//                developerConnection '${project.scm.connection}'
//                url '${project.url}'
//            }
//
//            licenses {
//                license {
//                    name 'MIT'
//                    url '${project.url}/blob/master/LICENSE</url>'
//                }
//            }
//
//            developers {
//                developer {
//                    name 'Jin Xu'
//                    id 'XenoAmess'
//                    email 'xenoamess@gmail.com'
//                    organization 'XenoAmess'
//                    url 'https://github.com/xenoamess'
//                }
//            }
//        }.writeTo("$buildDir/pom.xml")
//    }
//}
